<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FeatherSpeed — Simple Speedtest</title>
  <meta name="description" content="A simple, elegant, single-file speedtest you can host on GitHub Pages." />
  <style>
    :root{
      --bg1:#0f1724; --bg2:#0b1220;
      --glass: rgba(255,255,255,0.06);
      --accent: #7c3aed;
      --accent2: #06b6d4;
      --muted: rgba(255,255,255,0.6);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:white}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:48px}
    .card{width:980px;max-width:96vw;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:20px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);backdrop-filter: blur(8px);border:1px solid rgba(255,255,255,0.03)}
    .header{display:flex;align-items:center;gap:16px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(124,58,237,0.18)}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:1fr 340px;gap:20px;margin-top:20px}

    .main{padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02)}
    .meter{display:flex;align-items:center;gap:18px}
    .gauge-container{display:flex;gap:24px;justify-content:center}
    .gauge{width:220px;height:220px;display:grid;place-items:center;background:conic-gradient(from 200deg,var(--accent) 0%, transparent 0%);border-radius:50%;position:relative}
    .gauge .inner{width:170px;height:170px;border-radius:50%;background:linear-gradient(180deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02));display:grid;place-items:center}
    .speed{font-size:28px;font-weight:700}
    .unit{font-size:12px;color:var(--muted)}
    .label-under{margin-top:6px;font-size:14px;color:var(--muted);text-align:center}

    .controls{display:flex;flex-direction:column;gap:12px}
    .btn{padding:12px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;color:white;font-weight:600;cursor:pointer;box-shadow:0 8px 30px rgba(6,182,212,0.12)}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}

    .stats{display:flex;gap:12px;margin-top:12px}
    .stat{flex:1;padding:12px;border-radius:10px;background:var(--glass);text-align:center}
    .stat .label{font-size:12px;color:var(--muted)}
    .stat .value{font-weight:700;margin-top:6px}

    footer{margin-top:14px;color:var(--muted);font-size:12px;text-align:center}

    @media (max-width:880px){.grid{grid-template-columns:1fr;}.gauge{width:180px;height:180px}.gauge .inner{width:140px;height:140px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div class="logo">FS</div>
        <div>
          <h1>FeatherSpeed</h1>
          <p class="lead">A minimal, beautiful speedtest to host anywhere — simple HTML/CSS/JS, single file.</p>
        </div>
      </div>

      <div class="main">
        <div class="meter">
          <div class="gauge-container">
            <div>
              <div class="gauge" id="gaugeDownload">
                <div class="inner">
                  <div style="text-align:center">
                    <div class="speed" id="speedValDownload">—</div>
                    <div class="unit">Mbps</div>
                  </div>
                </div>
              </div>
              <div class="label-under">Download</div>
            </div>

            <div>
              <div class="gauge" id="gaugeUpload">
                <div class="inner">
                  <div style="text-align:center">
                    <div class="speed" id="speedValUpload">—</div>
                    <div class="unit">Mbps</div>
                  </div>
                </div>
              </div>
              <div class="label-under">Upload</div>
            </div>
          </div>

          <div class="controls">
            <button class="btn" id="startBtn">Run 30s Test</button>
            <div class="stats">
              <div class="stat">
                <div class="label">Latency</div>
                <div class="value" id="latency">— ms</div>
              </div>
              <div class="stat">
                <div class="label">Download</div>
                <div class="value" id="download">—</div>
              </div>
              <div class="stat">
                <div class="label">Upload</div>
                <div class="value" id="upload">—</div>
              </div>
            </div>
          </div>
        </div>
        <footer>Client-only — no backend required. Simulated 30-second speed test.</footer>
      </div>
    </div>
  </div>

  <script>
  const gaugeDownload = document.getElementById('gaugeDownload');
  const gaugeUpload = document.getElementById('gaugeUpload');
  const speedValDownload = document.getElementById('speedValDownload');
  const speedValUpload = document.getElementById('speedValUpload');
  const latencyEl = document.getElementById('latency');
  const downloadEl = document.getElementById('download');
  const uploadEl = document.getElementById('upload');
  const startBtn = document.getElementById('startBtn');

  function msToMbps(bytes, ms){
    if(ms<=0) return 0;
    return ((bytes*8)/(ms/1000))/1024/1024;
  }

  function setGauge(el, pct){
    const deg = 230*Math.min(1,pct);
    el.style.background = `conic-gradient(from 200deg,var(--accent) 0% ${deg}deg, rgba(255,255,255,0.02) ${deg}deg 360deg)`;
  }

  async function runTest(){
    startBtn.disabled = true;
    const duration = 30000; // 30 seconds
    const start = performance.now();
    const ping = Math.floor(Math.random()*20)+5;
    latencyEl.textContent = ping+" ms";
    let downloaded = 0;
    let uploaded = 0;
    const loop = setInterval(()=>{
      const now = performance.now();
      const elapsed = now-start;
      if(elapsed>=duration){
        clearInterval(loop);
        const dlMbps = msToMbps(downloaded, elapsed).toFixed(2);
        const upMbps = msToMbps(uploaded, elapsed).toFixed(2);
        downloadEl.textContent = dlMbps+" Mbps";
        uploadEl.textContent = upMbps+" Mbps";
        speedValDownload.textContent = dlMbps;
        speedValUpload.textContent = upMbps;
        setGauge(gaugeDownload, Math.tanh(dlMbps/400));
        setGauge(gaugeUpload, Math.tanh(upMbps/400));
        startBtn.disabled=false;
        return;
      }
      downloaded += Math.random()*2*1024*1024; // simulate bytes downloaded
      uploaded += Math.random()*1*1024*1024; // simulate bytes uploaded
      const dlSpeed = msToMbps(downloaded, elapsed);
      const upSpeed = msToMbps(uploaded, elapsed);
      speedValDownload.textContent = dlSpeed.toFixed(1);
      speedValUpload.textContent = upSpeed.toFixed(1);
      setGauge(gaugeDownload, Math.tanh(dlSpeed/400));
      setGauge(gaugeUpload, Math.tanh(upSpeed/400));
    },50);
  }

  startBtn.addEventListener('click', runTest);
  setInterval(()=>{
    if(startBtn.disabled===false){
      setGauge(gaugeDownload, 0.05+Math.sin(Date.now()/2000)*0.02);
      setGauge(gaugeUpload, 0.05+Math.cos(Date.now()/2000)*0.02);
    }
  },100);
  </script>
</body>
</html>
